---
title: "r4lineups: Statistical Inference on Lineup Fairness"
author: "Colin Tredoux"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{r4lineups: Statistical Inference on Lineup Fairness}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

This package contains functions to compute various estimates of lineup fairness, allowing eyewitness testimony researchers to reason inferentially about several well-known measures of lineup fairness developed in psychological research. 

The measures described below were developed by _______ (see References). Several other functions contained in this package are variations of measures of lineup fairness adapted from (refs), and modified by Professor Colin Tredoux. 


## Data Format

The majority of r4lineups functions require a vector of numeric lineup data, whilst other functions require the user to pass a list of lineup data. It is advisable to read the documentation to determine the format of data needed by each specific function. 

* Most r4lineups functions will not work with a dataframe, even if the dataframe contains only one vector. If your lineup data is in dataframe format already, you can easily convert it to a vector or a list. 

```{r,}
library(r4lineups)
data("CGTmock")
```
* Dataframe of CGTmock data:
```{r, echo=FALSE, results='asis'}
pander::pandoc.table(CGTmock[1:3,])
```

* For functions that require data for only one lineup or one lineup pair, you can convert the data from a given lineup to a vector:
    
```{r}
lineup_vec <- CGTmock[1]
```

* For functions that require several lineups or several lineup pairs, you can convert the data to a list:

```{r}
lineup_list <- as.list(CGTmock)
```

### Accurate Nominal Size

Functions which rely on nominal size for accurate calculations will require the user to manually specify nominal size. If nominal size, as specified by the user, is not reflected in the data passed to the function, execution of the function is halted with the following error message: 

## Lineup Proportion

Proportion refers to the proportion of witnesses selecting a particular member of a lineup. This package provides calculations of proportion for individual lineup members, and for all members of a lineup. 

* Calculating proportion for a single target/lineup member:
```{r}
library(r4lineups)

esize_m(table(lineup_vec))
```
The function returns a proportion indicating the frequency with which the target/linuep member occupying position 3 in the lineup was identified by x% of the witnesses, or x% of the time. 

* Should the user want to calculate proportion for each member of a given lineup, the `allprop` function can be called. Instead of the user specifying the target position, a vector of all target positions is passed to the function. This can be manually generated by calling `target_pos <- c(1:k)`

```{r}

```






## Styles

The `html_vignette` template includes a basic CSS theme. To override this theme you can specify your own CSS in the document metadata as follows:

    output: 
      rmarkdown::html_vignette:
        css: mystyles.css

## Figures

The figure sizes have been customised so that you can easily put two images side-by-side. 

```{r, fig.show='hold'}
plot(1:10)
plot(10:1)
```

You can enable figure captions by `fig_caption: yes` in YAML:

    output:
      rmarkdown::html_vignette:
        fig_caption: yes

Then you can use the chunk option `fig.cap = "Your figure caption."` in **knitr**.

## More Examples

You can write math expressions, e.g. $Y = X\beta + \epsilon$, footnotes^[A footnote here.], and tables, e.g. using `knitr::kable()`.

```{r, echo=FALSE, results='asis'}
knitr::kable(head(mtcars, 10))
```

Also a quote using `>`:

> "He who gives up [code] safety for [code] speed deserves neither."
([via](https://twitter.com/hadleywickham/status/504368538874703872))
